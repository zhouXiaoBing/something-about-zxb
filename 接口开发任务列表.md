### 举例：完成一个接口有原有的数据结构切换到，现有的数据结构的需要做的具体工作

购物车数据展现分布：

也接口字段和现接口字段对比：字段均取自数据库

| 原接口字段    | 现接口字段  | 解释                                                         |
| ------------- | ----------- | ------------------------------------------------------------ |
| true_name     | store_name  | 店铺名                                                       |
| seller_logo   | none        | 店铺logo（考虑要自己查找相应表）！！！                       |
| seller_id     | store_id    | 店铺id                                                       |
| agency_id     | agency_id   | 仓库id                                                       |
| agency        | none        | 仓库名（考虑自己查找相应表格）！！！                         |
| goods_id      | none        | 自己查表！！！                                               |
| goods_name    | goods_name  | 商品名                                                       |
| goods_price   | goods_price |                                                              |
| market_price  | none        | 市场价：自己查vtg_goods：商品表 或者不显示！！！             |
| store_nums    | none        | 库存：编辑数量时作为限制参数 自己查 goods_storage 表         |
| in_settlement | none        | 是否为选中状态：一次作为进入购物车是的计算<br />价格的参照，考虑后期数据库添加这个字段或者接口里<br />统一为不选中 |
| user_id       | buyer_id    | 用户id/买家id                                                |
| goods_number  | goods_num   | 加入购物车的数量                                             |

数据层级:现数据库未按此规则分级，考虑模仿原有接口在接口端做更改

```json
{
"ture_name":"维他购旗舰店",
"sller_logo":"url..............",
"sller_id":"2222",
    "goods":[
        {...},
        {...}
    ]
}
//现行结构
{"goods":[
        {...},
        {...}
    ]
}
```

对App端的影响及改动

1. 没有选中字段，默认为选中后需要本地计算总价，退出后再次登录无法保存，并不能同步到另外的设备
2. 根据wap端来看没有分仓结算，原结算订单是根据卖家id和仓库id以及用户id确定商品计算订单，现行逻辑单个商品唯一的cart_id 然后调相应方法
3. 客户端去掉分仓结算 只有一个结算按钮 只显示商品list 重写商品显示界面
4. 弃用原有的model结构，重写model的数据结构

购物车和订单的UI部分要重写

### 接口清单及完成时间预估

| 接口名               | 是否<br>涉及<br>UI改动 | 状态 | 预计时间/d<br>含App改动时间 | 备注                                        |
| -------------------- | ---------------------- | ---- | --------------------------- | ------------------------------------------- |
| 首页展示             | 否                     | 完成 |                             |                                             |
| 商品详情             | 部分隐藏               | 完成 |                             |                                             |
| 购物车（查询）       | 是                     | 完成 |                             | 购物车展示逻辑<br>变化，续重写App<br>的界面 |
| 购物车（加入）       | 否                     | 完成 |                             |                                             |
| 购物车（删除）       | 否                     |      | 1                           |                                             |
| 购物车（编辑数量）   | 否                     |      | 1____2                      |                                             |
| 购物车选中           |                        |      | 1____3                      | 数据库无字段<br>App端实时处理               |
| 商品分类一级         |                        | 完成 |                             |                                             |
| 商品分类二级         |                        | 完成 |                             |                                             |
| 商品搜索             | 否                     |      | 2____5                      | 指完成关键字搜索                            |
| 限时特卖             | 否                     |      | 2____7                      |                                             |
| 支付（支付宝）       | 否                     |      | 2____9                      | 需调试                                      |
| 支付（微信）         | 否                     |      | 2____11                     | 需调试                                      |
| 收藏                 | 否                     |      | 1____12                     |                                             |
| 取消收藏             | 否                     |      | 1____13                     |                                             |
| 评论列表             | 否                     |      | 2____15                     |                                             |
| 个人中心             | 是                     |      | 2____17                     |                                             |
| 账户（获取token）    |                        |      | 1____18                     | 新老系统都是s3的登录                        |
| 账户（重置密码）     |                        |      | 1____19                     | 但是token验证字段不同                       |
| 账户（注册）         |                        |      | ？                          | 步，续要进一步讨论                          |
| 账户（登录）         |                        |      | ？                          | 解决方案                                    |
| 第三方登陆（微信）   |                        |      | 1____20                     | 需调试                                      |
| 第三方登陆（QQ）     |                        |      | 1____21                     | 需调试                                      |
| App强制更新          | 否                     |      | 1____22                     | 考虑沿用老接口逻辑                          |
| 订单确认（结算）     |                        |      | 3____25                     | 参数变化                                    |
| 创建订单（支付发起） |                        |      | 3____28                     | 购物流程逻辑变化                            |
| 订单（提交退款）     | 是                     |      | ？                          | 订单的状态码发生变化                        |
| 订单（同意退款）     | 是                     |      | ？                          | 需要进一步作出取舍和                        |
| 订单（取消售后申请） |                        |      | ？                          | 界面上的改变                                |
| 订单（平台介入）     |                        |      | ？                          | 订单模块不好预估                            |
| 订单（修改售后）     |                        |      | ?                           |                                             |
| 订单（申请售后）     |                        |      | ?                           |                                             |
| 订单（删除）         |                        |      | ?                           |                                             |
| 订单（修改）         |                        |      | ?                           |                                             |
| 评价商品             | 否                     |      | 2____30                     |                                             |
| 查看物流             | 否                     |      | 2____32                     |                                             |
| 取消订单             |                        |      | 1____33                     |                                             |
| 订单详情             |                        |      | 1____34                     |                                             |
| 订单状态             |                        |      | 5____39                     | 状态码逻辑变化<br>App端要有相应的改动       |
| 取消退货申请         |                        |      | 1____40                     |                                             |
| 投诉管理             |                        |      | ？                          |                                             |
| 地址（修改）         | 否                     |      | 1____41                     |                                             |
| 地址（新增）         |                        |      | 1____42                     |                                             |
| 地址（删除）         |                        |      | 1____43                     |                                             |
| 地址（设置默认）     |                        |      | 1____44                     |                                             |
| 地址（获取列表）     |                        |      | 1____45                     |                                             |
| 修改个人信息         | 否                     |      | 2____47                     |                                             |
| 优惠劵列表           |                        |      | ？                          | 逻辑改变                                    |
| 我的评论             | 否                     |      | 2____48                     |                                             |
| 删除足迹             | 否                     |      | 2____50                     |                                             |
| 我的足迹列表         | 否                     |      | 2____52                     |                                             |



