[TOC]



## TCP/IP，TCP，UDP，IP，Socket

#### 概述

------

- 什么是TCP/IP?
- TCP 、UDP有什么区别？
- 什么是Socket？

#### 什么是TCP/IP?

------

计算机与网络设备之间要通信，双方就必须基于相同的方法。我们把这种约定称之为协议（protocol）。

TCP/IP是互联网的协议的总称，

| OSI     | TCP/IP结构         |
| ------- | ---------------- |
| 7 应用层   |                  |
| 6 表示层   |                  |
| 5 会话层   | 5，6，7 统称应用层      |
| 4 传输层   | 主机到主机层（tcp）      |
| 3 网络层   | 网络层（IP）          |
| 2 数据链路层 |                  |
| 1 物理层   | 1，2 网络接口层（又称链路层） |

- OSI参考模型

OSI参考模型是ISO的建议：开放系统互联参考模型（Open System Interconnection Reference Model）。

- TCP/IP参考模型

TCP/IP参考模型首先是一种网络体系结构，其两个主要的协议出现以后被统称为TCP/IP参考模型。分四层：数据链路层、网络层、传输层和应用层

#### TCP/IP的分层管理

TCP/IP协议族里面最重要的的一点就是分层，把TCP/IP层次化是有好处的，类似模块化好替换。设计相对的简单了。

| OSI中的层  | 功能                       | TCP/IP协议族                                |
| ------- | ------------------------ | ---------------------------------------- |
| 7 应用层   | 文件传输、电子邮件<br />文件服务、虚拟终端 | TFTP、HTTP、SNMP、FTP<br />SMTP、DNS、Telnet等 |
| 6 表示层   | 数据格式化、代码转换<br />数据加密     | 没有协议                                     |
| 5 会话层   | 接触或建立与别的接点的连接            | 没有协议                                     |
| 4 传输层   | 提供端对端的接口                 | TCP、UDP                                  |
| 3 网络层   | 为数据包选择路由                 | IP、ICMP、OSPF、EIGRP、IGMP                  |
| 2 数据链路层 | 传输有地址的帧以及错误检测功能          | SLIP、CSLIP、PPP、MTU                       |
| 1 物理层   | 以二进制的形式在物理媒介上传输数据        | ISO2110、IEEE802、IEEE802.2                |

- 数据链路层

数据链路层是负责接收 IP 数据包并通过网络发送，或者从网络上接收物理帧，抽出 IP 数据包，交给 IP 层。

ARP是正向地址解析协议，通过已知的 IP，寻找对应主机的 MAC 地址RARP是反向的地址解析协议，通过 MAC 地址确定 IP 地址。比如无盘工作站还有DHCP服务。

常见的接口层协议有：Ethernet 802.3、 Token Ring 802.5 、 X.25 、Frame relay、 HDLC、 PPP ATM等

- 网络层

负责计算机之间的通信。

1.处理来自传输层的分组发送请求，收到请求后，将分组装入 IP 数据报，填充报头，选择去往信宿机的路径，然后将数据发往适当的网络接口。

2.处理输入的数据包：首先检查其合法性，然后进行寻径—假如改数据包已经到达信宿机，则去掉报头，将剩下的部分交给适当的传输协议；反之，转发改数据包。

3.处理路径、流控、拥塞等问题。

网络层包括：IP（Internet Protocol）、ICMP（Internet control Message  Protocol）控制报文协议、 ARP（address resolution Protocol）地址转换协议，RARP（Reverse ARP）反向地址转换协议

IP 是网络层的核心，通过路由器选择将下一条 IP 封装后交给接口层。 IP 数据报是无连接服务

ICMP是网络层的补充，可以回送报文。用来检测网络是否畅通。

Ping命令就是发送 ICMP 的 echo 包，通过回送的 echo relay 进行网络测试

- 传输层

提供应用层间的通信。其功能包括

一、格式化信息流

二、提供可靠的传输。为实现后者，传输层协议规定接收端必须发回确认，并且加入分组丢失，必须重新发送，即耳熟能详的三次握手过程，从而提供可靠的数据传输。

传输层的主要协议是：传输控制协议 TCP（Transmission Control Protocol） 和用户数据报协议 UDP（User Datagram Protocol）。

- 应用层

向用户提供一组常用的应用程序，比如电子邮件、文件传输访问、远程登录等。远程登录 TELNET 使用 TELNET 协议提供在网络其他主机注册的接口。 TELNET 会话提供了基于字符的虚拟终端。文件传输访问 FTP 使用 FTP 协议来 提供网络内机器间的文件拷贝功能。

应用层协议主要包括：FTP、 TELNET 、DNS、SMTP、NFS、HTTP

FTP（File Transfer Protocol）：是文件传输协议，一般上传下载用FTP服务，数据端口是 20H，控制端口是 21H

Telnet：用户远程登录服务，使用 23H 端口，使用明码传输，保密性差、简单方便。

DNS（Domain Name Service）是域名解析服务，提供域名到 IP 地址之间的转换， 使用端口 53.

SMTP（simple Mail Transfer Protocol） 简单的邮件传输协议。用来控制信件的发送、中转、使用端口 25.

NFS（Network File System）是网络文件系统，用于网络中不同主机的文件共享

HTTP（Hypertext Transfer Protocol）是超文本传输协议，用于实现互联网中的 WWW 服务，使用端口 80 

#### 什么是 TCP？

TCP（Transmission Control Protocol）是一种面向连接的、可靠的、基于字节流的传输层通信协议，面向连接的流协议，是不间断的数据结构。为保证报文传输的可靠，就给每个包一个序号，同时也保证了接受顺序，，然后接收端实体对已接收到的字节发回一个相应的确认（ack）;如果发送端实体在合理的往返时延迟（RTT）内未收到确认，那么对应的数据将会被重传。

- 建立连接

TCP是因特网中的传输协议，使用三次握手建立连接。当主动方发出SYN请求后，等待对方回答 SYN + ACK，并最终对对方的 SYN 执行 ACK 确认。这种建立的连接方法可以防止产生错误的链接，TCP 使用的流量控制协议是可以大小的滑动窗口协议。



